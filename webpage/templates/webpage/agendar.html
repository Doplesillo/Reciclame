{% extends "base/base.html" %}
{% load static %}
{% block contenedor %}
    <article>
        <section class="section-name p-2">
            <h4>Agenda tu cita</h4>
        </section>
        <section class="section-title p-3">
            <h3>Registro de tu cita</h3>
            <h5>Centros de Acopio</h5>
            <p>Elige el centro de acopio donde deseas llevar tus residuos</p>
        </section>
        <section class="schedule-map">
            <div id="mapid"></div>
        </section>
        <section class="schedule-map-form container p-4">
            <form class="d-flex flex-wrap">
                <div class="form-group col-12">
                    <label for="exampleFormControlSelect1">Centro de Acopio</label>
                    <select class="form-control" id="acopio">
                        {% for lugar in lugares %}
                        <option value="{{ lugar.id }}">{{ lugar.place_name }}</option>
                        {% endfor %}
                    </select>
                </div>
                <div class="form-group col-12">
                    <label for="exampleFormControlSelect2">Fecha</label>
                    <input type="date" class="form-control mb-3">
                </div>
                <div class="form-group col-lg-4">
                    <label for="exampleFormControlSelect1">Residuos Electronicos</label>
                    <select class="form-control" id="exampleFormControlSelect1">
                        {% for residuo in residuos %}
                        <option value="{{ residuo.id }}">{{ residuo.waste_name }}</option>
                        {% endfor %}
                    </select>
                </div>
                <div class="form-group col-lg-4">
                    <label for="num-residuos"> Numero a llevar</label>
                    <input id="num-residuos" type="number" class="form-control" min="0">
                </div>
                <div class="form-group col-lg-4">
                    <label for="num-residuos">Espacios Restantes en Sucursal</label>
                    {% for limit in limite %}
                          <input id="num-residuos" type="number" class="form-control"  placeholder="{{ limit.limit }}" disabled >
                    {% endfor %}
                </div>
                <div class="d-flex justify-content-center align-items-center w-100">
                   <button class="btn btn-success"> Agendar Cita! </button>
                </div>
            </form>
        </section>
        <!-- leaflet + mapbox -->
        <script>
            var mymap = L.map('mapid').setView([20.659698, -103.349609], 13);
            L.tileLayer('https://api.tiles.mapbox.com/v4/mapbox.streets/{z}/{x}/{y}.png?access_token=pk.eyJ1Ijoiam1hbnVlbC1jaGFpcmV6IiwiYSI6ImNqa3dwbmxrZjAwZHczcXA0Nndud3k2NncifQ.9Wg2JDWZnmr1J57aPT1_rQ', {
                attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',
                maxZoom: 18,
                id: 'mapbox.streets',
                accessToken: 'pk.eyJ1Ijoiam1hbnVlbC1jaGFpcmV6IiwiYSI6ImNqa3dwbmxrZjAwZHczcXA0Nndud3k2NncifQ.9Wg2JDWZnmr1J57aPT1_rQ'
            }).addTo(mymap);
            var Cucea = L.marker([20.659698, -103.349609]).addTo(mymap);
            Cucea.bindPopup("<b>Universidad</b><br>9:00am - 5pm<br>Lunes a Viernes"); //Abrir pop up automaticamente al cargar { .openPopup() }
            Cucea.on('click', onMapClick);

            var marker = L.marker([20.6443414,-103.438884]).addTo(mymap);
            marker.bindPopup("<b>Hello world!</b><br>I am a popup."); //Abrir pop up automaticamente al cargar { .openPopup() }
            marker.on('click', onMapClick);

            var marker = L.marker([20.6844813,-103.4502551]).addTo(mymap);
            marker.bindPopup("<b>Hello world!</b><br>I am a popup."); //Abrir pop up automaticamente al cargar { .openPopup() }
            marker.on('click', onMapClick);

            var marker = L.marker([20.7326378,-103.4002075]).addTo(mymap);
            marker.bindPopup("<b>Hello world!</b><br>I am a popup."); //Abrir pop up automaticamente al cargar { .openPopup() }
            marker.on('click', onMapClick);

            var marker = L.marker([20.659698, -103.349609]).addTo(mymap);
            marker.bindPopup("<b>Hello world!</b><br>I am a popup."); //Abrir pop up automaticamente al cargar { .openPopup() }
            marker.on('click', onMapClick);

            var marker = L.marker([20.659698, -103.349609]).addTo(mymap);
            marker.bindPopup("<b>Hello world!</b><br>I am a popup."); //Abrir pop up automaticamente al cargar { .openPopup() }
            marker.on('click', onMapClick);

            var marker = L.marker([20.659698, -103.349609]).addTo(mymap);
            marker.bindPopup("<b>Hello world!</b><br>I am a popup."); //Abrir pop up automaticamente al cargar { .openPopup() }
            marker.on('click', onMapClick);

            var marker = L.marker([20.659698, -103.349609]).addTo(mymap);
            marker.bindPopup("<b>Hello world!</b><br>I am a popup."); //Abrir pop up automaticamente al cargar { .openPopup() }
            marker.on('click', onMapClick);

            var marker = L.marker([20.659698, -103.349609]).addTo(mymap);
            marker.bindPopup("<b>Hello world!</b><br>I am a popup."); //Abrir pop up automaticamente al cargar { .openPopup() }
            marker.on('click', onMapClick);

            function onMapClick(e) {
                document.getElementById('acopio').value = "centro_2";
            }

        </script>
    </article>
{% endblock %}